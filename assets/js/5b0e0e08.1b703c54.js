"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[34],{7512:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return d},default:function(){return m},frontMatter:function(){return o},metadata:function(){return s},toc:function(){return u}});var i=t(5773),a=t(808),l=(t(7378),t(5318)),r=["components"],o={},d="condition",s={unversionedId:"condition/readme",id:"condition/readme",title:"condition",description:"Motivation",source:"@site/../src/condition/readme.md",sourceDirName:"condition",slug:"/condition/",permalink:"/methods/condition/",draft:!1,editUrl:"https://github.com/effector/patronum/tree/main/src/../src/condition/readme.md",tags:[],version:"current",frontMatter:{},sidebar:"methodsSidebar",previous:{title:"combineEvents",permalink:"/methods/combine-events/"},next:{title:"debounce",permalink:"/methods/debounce/"}},c={},u=[{value:"Motivation",id:"motivation",level:2},{value:"<code>condition({ source: Unit, if: Store, then?: Unit, else?: Unit })</code>",id:"condition-source-unit-if-store-then-unit-else-unit-",level:2},{value:"Formulae",id:"formulae",level:3},{value:"Arguments",id:"arguments",level:3},{value:"Returns",id:"returns",level:3},{value:"Example",id:"example",level:3},{value:"<code>condition({ source: Unit&lt;T&gt;, if: T, then?: Unit, else?: Unit })</code>",id:"condition-source-unitt-if-t-then-unit-else-unit-",level:2},{value:"Formulae",id:"formulae-1",level:3},{value:"Arguments",id:"arguments-1",level:3},{value:"Returns",id:"returns-1",level:3},{value:"Example",id:"example-1",level:3},{value:"<code>condition({ source: Unit&lt;T&gt;, if: Function, then?: Unit, else?: Unit })</code>",id:"condition-source-unitt-if-function-then-unit-else-unit-",level:2},{value:"Formulae",id:"formulae-2",level:3},{value:"Arguments",id:"arguments-2",level:3},{value:"Returns",id:"returns-2",level:3},{value:"Example",id:"example-2",level:3},{value:"Examples",id:"examples",level:2},{value:"Source is event",id:"source-is-event",level:3},{value:"Condition can be nested",id:"condition-can-be-nested",level:3}],p={toc:u};function m(e){var n=e.components,t=(0,a.Z)(e,r);return(0,l.kt)("wrapper",(0,i.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"condition"},"condition"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"import { condition } from 'patronum/condition';\n")),(0,l.kt)("h2",{id:"motivation"},"Motivation"),(0,l.kt)("p",null,"Condition is very similar to ",(0,l.kt)("a",{parentName:"p",href:"https://effector.dev/docs/api/effector/guard"},(0,l.kt)("inlineCode",{parentName:"a"},"guard")),", but allows you to have ",(0,l.kt)("inlineCode",{parentName:"p"},"else")," branch along with simple ",(0,l.kt)("inlineCode",{parentName:"p"},"if")," matcher."),(0,l.kt)("h2",{id:"condition-source-unit-if-store-then-unit-else-unit-"},(0,l.kt)("inlineCode",{parentName:"h2"},"condition({ source: Unit, if: Store, then?: Unit, else?: Unit })")),(0,l.kt)("h3",{id:"formulae"},"Formulae"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"result = condition({\n  source,\n  if: $checker,\n  then,\n  else,\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"When ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," is triggered, check value of ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker"),", if it equals ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),", trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source"),", otherwise trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"result")," is the same unit as ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," allows to nest ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," to another ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"sample"))),(0,l.kt)("h3",{id:"arguments"},"Arguments"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"source")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 Data from this unit will be passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"else")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"if")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Store<boolean>)")," \u2014 Updates of this store will not trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," and ",(0,l.kt)("inlineCode",{parentName:"li"},"else")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"then")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," is not provided"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"else")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," is not provided")),(0,l.kt)("h3",{id:"returns"},"Returns"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 The same unit type that passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"source"))),(0,l.kt)("h3",{id:"example"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const change = createEvent();\nconst $source = createStore('data').on(change, (_, payload) => payload);\n\nconst toggle = createEvent();\nconst $isEnabled = createStore(false).on(toggle, (is) => !is);\n\nconst enabled = createEvent();\nconst disabled = createEvent();\n\ncondition({\n  source: $source,\n  if: $isEnabled,\n  then: enabled,\n  else: disabled,\n});\nenabled.watch((payload) => console.log('enabled -', payload));\ndisabled.watch((payload) => console.log('disabled -', payload));\n\nchange('newdata');\n// => disabled - newdata\n\ntoggle();\nchange('data');\n// => enabled - data\n")),(0,l.kt)("h2",{id:"condition-source-unitt-if-t-then-unit-else-unit-"},(0,l.kt)("inlineCode",{parentName:"h2"},"condition({ source: Unit<T>, if: T, then?: Unit, else?: Unit })")),(0,l.kt)("h3",{id:"formulae-1"},"Formulae"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"result = condition({\n  source,\n  if: value,\n  then,\n  else,\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"When ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," is triggered, compare ",(0,l.kt)("inlineCode",{parentName:"li"},"value")," literal with ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," payload, if it equals trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source"),", otherwise trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"result")," is the same unit as ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," allows to nest ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," to another ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"sample"))),(0,l.kt)("h3",{id:"arguments-1"},"Arguments"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"source")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 Data from this unit will be passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"else")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"if")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(T)")," \u2014 Just value to compare with ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," payload. ",(0,l.kt)("em",{parentName:"li"},"Note: objects will be compared by reference")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"then")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," is not provided"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"else")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," is not provided")),(0,l.kt)("h3",{id:"returns-1"},"Returns"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 The same unit type that passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"source"))),(0,l.kt)("h3",{id:"example-1"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const increment = createEvent();\nconst $source = createStore(0).on(increment, (state) => state + 1);\n\nconst log = createEvent();\nconst run = createEffect().use((data) => {\n  console.info('FAKE RUN EFFECT', data);\n});\n\ncondition({\n  source: $source,\n  if: 4,\n  then: run,\n  else: log,\n});\n\nlog.watch((payload) => console.log('LOG ABOUT IT', payload));\n\nincrement(); // => LOG ABOUT IT 1\nincrement(); // => LOG ABOUT IT 2\nincrement(); // => LOG ABOUT IT 3\nincrement(); // => FAKE RUN EFFECT 4\nincrement(); // => LOG ABOUT IT 5\n")),(0,l.kt)("h2",{id:"condition-source-unitt-if-function-then-unit-else-unit-"},(0,l.kt)("inlineCode",{parentName:"h2"},"condition({ source: Unit<T>, if: Function, then?: Unit, else?: Unit })")),(0,l.kt)("h3",{id:"formulae-2"},"Formulae"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"result = condition({\n  source,\n  if: (payload) => boolean,\n  then,\n  else,\n});\n")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"When ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," is triggered, call ",(0,l.kt)("inlineCode",{parentName:"li"},"if")," with ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," payload, if it returns ",(0,l.kt)("inlineCode",{parentName:"li"},"true")," trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source"),", otherwise trigger ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," with value from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"result")," is the same unit as ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," allows to nest ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," to another ",(0,l.kt)("inlineCode",{parentName:"li"},"condition")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"sample"))),(0,l.kt)("h3",{id:"arguments-2"},"Arguments"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"source")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 Data from this unit will be passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," or ",(0,l.kt)("inlineCode",{parentName:"li"},"else")),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"if")," ",(0,l.kt)("inlineCode",{parentName:"li"},"((payload: T) => boolean)")," \u2014 Function comparator. It should return boolean"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"then")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"true"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"else")," is not provided"),(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"else")," ",(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 This unit will be triggered with data from ",(0,l.kt)("inlineCode",{parentName:"li"},"source")," if ",(0,l.kt)("inlineCode",{parentName:"li"},"$checker")," contains ",(0,l.kt)("inlineCode",{parentName:"li"},"false"),". Required if ",(0,l.kt)("inlineCode",{parentName:"li"},"then")," is not provided")),(0,l.kt)("h3",{id:"returns-2"},"Returns"),(0,l.kt)("ol",null,(0,l.kt)("li",{parentName:"ol"},(0,l.kt)("inlineCode",{parentName:"li"},"(Unit<T>)")," \u2014 The same unit type that passed to ",(0,l.kt)("inlineCode",{parentName:"li"},"source"))),(0,l.kt)("h3",{id:"example-2"},"Example"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const change = createEvent();\nconst $source = createStore('data').on(change, (_, payload) => payload);\nconst target = createEvent();\nconst another = createEvent();\n\ncondition({\n  source: $source,\n  if: (source) => source.length > 3,\n  then: target,\n  else: another,\n});\ntarget.watch((payload) => console.log('triggered', payload));\nanother.watch((payload) => console.log('condition else:', payload));\n\nchange('newdata');\n// => triggered newdata\n\nchange('old');\n// => condition else: old\n")),(0,l.kt)("h2",{id:"examples"},"Examples"),(0,l.kt)("h3",{id:"source-is-event"},"Source is event"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const inputChanged = createEvent();\nconst $value = createStore('');\nconst $error = createStore(false);\n\nconst setError = createEvent();\nconst setValue = createEvent();\n\n$value.on(setValue, (_, value) => value);\n$error.on(setError, () => true).on(setValue, () => false);\n\ncondition({\n  source: inputChanged,\n  if: isValid,\n  then: setValue,\n  else: setError,\n});\n\nfunction isValid(value) {\n  return value.trim().length > 0;\n}\n")),(0,l.kt)("h3",{id:"condition-can-be-nested"},"Condition can be nested"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-ts"},"const $value = createStore('hello@world');\nconst updateEmail = createEvent<string>();\n\ncondition({\n  source: $value,\n  if: (length) => length > 0,\n  then: condition({\n    if: (string) => string.includes('@'),\n    then: updateEmail,\n  }),\n});\n")))}m.isMDXComponent=!0},5318:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var i=t(7378);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function o(e,n){if(null==e)return{};var t,i,a=function(e,n){if(null==e)return{};var t,i,a={},l=Object.keys(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(i=0;i<l.length;i++)t=l[i],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var d=i.createContext({}),s=function(e){var n=i.useContext(d),t=n;return e&&(t="function"==typeof e?e(n):r(r({},n),e)),t},c=function(e){var n=s(e.components);return i.createElement(d.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return i.createElement(i.Fragment,{},n)}},p=i.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,d=e.parentName,c=o(e,["components","mdxType","originalType","parentName"]),p=s(t),m=a,k=p["".concat(d,".").concat(m)]||p[m]||u[m]||l;return t?i.createElement(k,r(r({ref:n},c),{},{components:t})):i.createElement(k,r({ref:n},c))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,r=new Array(l);r[0]=p;var o={};for(var d in n)hasOwnProperty.call(n,d)&&(o[d]=n[d]);o.originalType=e,o.mdxType="string"==typeof e?e:a,r[1]=o;for(var s=2;s<l;s++)r[s]=t[s];return i.createElement.apply(null,r)}return i.createElement.apply(null,t)}p.displayName="MDXCreateElement"}}]);